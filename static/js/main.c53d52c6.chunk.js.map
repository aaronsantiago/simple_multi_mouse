{"version":3,"sources":["../node_modules/gun sync","logo.svg","App.js","reportWebVitals.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","_","require","radisk","uuidv4","replace","c","r","Math","random","toString","App","useState","mice","setMice","myUid","setMyUid","setTimer","gunBase","setGunBase","useEffect","miceCache","unmounted","gunRef","temp_gunBase","Gun","peers","localStorage","get","requestAnimationFrame","updateTimer","Date","now","map","on","el","key","g","old","off","setTimeout","emptyId","sortBy","Object","values","length","t","k","className","style","width","height","background","onMouseMove","put","x","clientX","y","clientY","icon","faMousePointer","pointerEvents","position","top","left","opacity","min","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"4IAAA,SAASA,EAAoBC,GAC5B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBF,EAAM,KAEjD,MADAC,EAAEE,KAAO,mBACHF,EAEPF,EAAoBK,KAAO,WAAa,MAAO,IAC/CL,EAAoBM,QAAUN,EAC9BO,EAAOC,QAAUR,EACjBA,EAAoBS,GAAK,I,oGCRV,I,4CCQXC,EAAIC,EAAQ,IAEVC,GADQD,EAAQ,IACPA,EAAQ,KACTA,EAAQ,IACLA,EAAQ,IACVA,EAAQ,IAEvB,SAASE,IACP,MAAO,uCAAuCC,QAAQ,SAAS,SAAUC,GACvE,IAAIC,EAAqB,GAAhBC,KAAKC,SAAiB,EAE/B,OADW,KAALH,EAAWC,EAAS,EAAJA,EAAW,GACxBG,SAAS,OA6FPC,MAzFf,WACE,MAAsBC,mBAAS,IAA/B,mBAAKC,EAAL,KAAWC,EAAX,KACA,EAAwBF,mBAAS,MAAjC,mBAAKG,EAAL,KAAYC,EAAZ,KACA,EAAwBJ,mBAAS,GAAjC,mBAAYK,GAAZ,WACA,EAA4BL,mBAAS,MAArC,mBAAKM,EAAL,KAAcC,EAAd,KAkDA,OAhDAC,qBAAU,WACR,IAAIC,EAAY,GACZC,GAAY,EACZC,EAAS,KAQTC,EALMC,IAAI,CACZC,MAAO,CAAC,qDACRvB,OAAQA,IAAU,EAClBwB,cAAc,IAEOC,IAAI,eAAeA,IAAI,kBA+B9C,OA9BAT,EAAWK,GAOXK,uBALA,SAASC,IACHR,IACJL,EAASc,KAAKC,OACdH,sBAAsBC,OAGxBN,EAAaS,MAAMC,IAAG,SAACC,EAAIC,EAAKC,GAC9Bd,EAASc,EACThB,EAAUe,GAAOD,EACjBrB,GAAQ,SAACwB,GACP,OAAO,2BAAKA,GAAZ,kBAAkBF,EAAMD,OAEtBb,GACFC,EAAOgB,SAKXC,YAAW,WACT,IAAIC,EAAUxC,EAAEyC,OAAOC,OAAOC,OAAOvB,GAAW,CAAC,MAC7CoB,EAAQI,OAAS,GAAKd,KAAKC,MAAQS,EAAQ,GAAGK,EAAI,IACpD9B,EAASyB,EAAQ,GAAGM,GAAK3C,KAGzBY,EAASZ,OAEV,KAEI,WAAO,IAAD,EACXkB,GAAY,EACN,QAAN,EAAAC,SAAA,SAAQgB,SAGT,IAED,qBACES,UAAU,MACVC,MAAO,CAAEC,MAAO,QAASC,OAAQ,QAASC,WAAY,QACtDC,YAAa,SAAC5D,GACG,MAAXyB,GAA4B,MAATH,GACvBG,EAAQU,IAAIb,GAAOuC,IAAI,CACrBC,EAAG9D,EAAE+D,QACLC,EAAGhE,EAAEiE,QACLZ,EAAGf,KAAKC,MACRe,EAAGhC,KATT,SAaE,8BACG4B,OAAOC,OAAO/B,GAAMoB,KAAI,SAACE,GAAD,OACvBJ,KAAKC,MAAQG,EAAGW,EAAI,KAAQX,EAAGY,GAAKhC,EAClC,cAAC,IAAD,CAEE4C,KAAMC,IACNX,MAAO,CACLY,cAAe,OACfC,SAAU,WACVC,IAAK5B,EAAGsB,EAAI,KACZO,KAAM7B,EAAGoB,EAAI,KACbU,QAASzD,KAAK0D,IAAI,GAAKnC,KAAKC,MAAQG,EAAGW,GAAG,IAAM,KAP7CX,EAAGY,GAUR,aC7FCoB,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OAEL,cAAC,EAAD,IAEFC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.c53d52c6.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 25;","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import logo from \"./logo.svg\";\nimport \"./App.css\";\nimport { useEffect, useState } from \"react\";\nimport { HashRouter, Switch, Route, Link } from \"react-router-dom\";\nimport Gun from \"gun/gun\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faMousePointer } from \"@fortawesome/free-solid-svg-icons\";\n\nvar _ = require('lodash');\nconst radix = require(\"gun/lib/radix\");\nconst radisk = require(\"gun/lib/radisk\");\nconst store = require(\"gun/lib/store\");\nconst rindexed = require(\"gun/lib/rindexed\");\nconst webrtc = require(\"gun/lib/webrtc\");\n\nfunction uuidv4() {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = (Math.random() * 16) | 0,\n      v = c == \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\nfunction App() {\n  let [mice, setMice] = useState({});\n  let [myUid, setMyUid] = useState(null);\n  let [timer, setTimer] = useState(0);\n  let [gunBase, setGunBase] = useState(null);\n  \n  useEffect(() => {\n    let miceCache = {};\n    let unmounted = false;\n    let gunRef = null;\n    let timeout = null;\n\n    var gun = Gun({\n      peers: [\"https://aarondotwork-gun-server.herokuapp.com/gun\"],\n      radisk: radisk || false,\n      localStorage: false,\n    });\n    let temp_gunBase = gun.get(\"simple_mice\").get(\"test_instance2\");\n    setGunBase(temp_gunBase);\n\n    function updateTimer() {\n      if (unmounted) return;\n      setTimer(Date.now());\n      requestAnimationFrame(updateTimer);\n    }\n    requestAnimationFrame(updateTimer);\n    temp_gunBase.map().on((el, key, g) => {\n      gunRef = g;\n      miceCache[key] = el;\n      setMice((old) => {\n        return { ...old, [key]: el };\n      });\n      if (unmounted) {\n        gunRef.off();\n        return;\n      }\n    });\n\n    setTimeout(() => {\n      let emptyId = _.sortBy(Object.values(miceCache),['t'] );\n      if (emptyId.length > 0 && Date.now() - emptyId[0].t > 1000) {\n        setMyUid(emptyId[0].k || uuidv4());\n      }\n      else {\n        setMyUid(uuidv4());\n      }\n    }, 3000);\n\n    return () => {\n      unmounted = true;\n      gunRef?.off();\n      timeout && clearTimeout(timeout);\n    };\n  }, []);\n  return (\n    <div\n      className=\"App\"\n      style={{ width: \"100vw\", height: \"100vh\", background: \"none\" }}\n      onMouseMove={(e) => {\n        if (gunBase == null || myUid == null) return;\n        gunBase.get(myUid).put({\n          x: e.clientX,\n          y: e.clientY,\n          t: Date.now(),\n          k: myUid,\n        });\n      }}\n    >\n      <div>\n        {Object.values(mice).map((el) =>\n          Date.now() - el.t < 5000 && el.k != myUid ? (\n            <FontAwesomeIcon\n              key={el.k}\n              icon={faMousePointer}\n              style={{\n                pointerEvents: \"none\",\n                position: \"absolute\",\n                top: el.y + \"px\",\n                left: el.x + \"px\",\n                opacity: Math.min(1 - (Date.now() - el.t)/5000, 1)\n              }}\n            />\n          ) : null\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  // <React.StrictMode>\n    <App />,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}